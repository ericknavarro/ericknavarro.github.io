<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Mi primer proyecto utilizando PLY con Python 3 - Erick Navarro</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Erick Navarro"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Erick Navarro"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Se desarrollará un intérprete que recibe como entrada varias expresiones aritméticas y presentando como salida el resultado de dichas expresiones. Las tecnologías a utilizar son:  PLY: Generador de an"><meta property="og:type" content="blog"><meta property="og:title" content="Mi primer proyecto utilizando PLY con Python 3"><meta property="og:url" content="https://ericknavarro.github.io/2020/02/10/24-Mi-primer-proyecto-utilizando-PLY/"><meta property="og:site_name" content="Erick Navarro"><meta property="og:description" content="Se desarrollará un intérprete que recibe como entrada varias expresiones aritméticas y presentando como salida el resultado de dichas expresiones. Las tecnologías a utilizar son:  PLY: Generador de an"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ericknavarro.github.io/gallery/thumbnails/24.png"><meta property="article:published_time" content="2020-02-10T22:17:25.000Z"><meta property="article:modified_time" content="2025-06-19T02:56:32.552Z"><meta property="article:author" content="Erick Navarro"><meta property="article:tag" content="Compilers"><meta property="article:tag" content="Python"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://ericknavarro.github.io/gallery/thumbnails/24.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ericknavarro.github.io/2020/02/10/24-Mi-primer-proyecto-utilizando-PLY/"},"headline":"Mi primer proyecto utilizando PLY con Python 3","image":["https://ericknavarro.github.io/gallery/thumbnails/24.png"],"datePublished":"2020-02-10T22:17:25.000Z","dateModified":"2025-06-19T02:56:32.552Z","author":{"@type":"Person","name":"Erick Navarro"},"publisher":{"@type":"Organization","name":"Erick Navarro","logo":{"@type":"ImageObject","url":"https://ericknavarro.github.io/img/logo.svg"}},"description":"Se desarrollará un intérprete que recibe como entrada varias expresiones aritméticas y presentando como salida el resultado de dichas expresiones. Las tecnologías a utilizar son:  PLY: Generador de an"}</script><link rel="canonical" href="https://ericknavarro.github.io/2020/02/10/24-Mi-primer-proyecto-utilizando-PLY/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-145306707-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-145306707-1');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Erick Navarro" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Connect on LinkedIn" href="https://www.linkedin.com/in/ericknd/"><i class="fab fa-linkedin"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-02-10T22:17:25.000Z" title="2/10/2020, 4:17:25 PM">2020-02-10</time></span><span class="level-item"> Erick Navarro </span><span class="level-item"><a class="link-muted" href="/categories/Computer-Science/">Computer Science</a><span> / </span><a class="link-muted" href="/categories/Computer-Science/Compilers/">Compilers</a></span></div></div><h1 class="title is-3 is-size-4-mobile">Mi primer proyecto utilizando PLY con Python 3</h1><div class="content"><p>Se desarrollará un intérprete que recibe como entrada varias expresiones aritméticas y presentando como salida el resultado de dichas expresiones.</p>
<p>Las tecnologías a utilizar son:</p>
<ul>
<li><strong>PLY</strong>: Generador de analizadores léxicos y sintácticos.</li>
<li><strong>Python 3</strong>: Es un lenguaje de programación interpretado de alto nivel.</li>
<li><strong>Visual Studio Code</strong>: Es un editor de código ligero pero poderoso. Existen complementos para trabajar con este lenguaje.</li>
</ul>
<p>El proyecto completo lo pueden descargar del siguiente enlace</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/ericknavarro/ProyectoPly">Mi primer proyecto utilizando PLY</a></li>
</ul>
<h3 id="PLY"><a href="#PLY" class="headerlink" title="PLY"></a><strong>PLY</strong></h3><p><a target="_blank" rel="noopener" href="https://www.dabeaz.com/ply/">PLY</a> es una implementación en Python de lex y yacc, herramientas populares para la construcción de compiladores.</p>
<p>La principal tarea de un analizador léxico es leer los caracteres de entrada del programa fuente, agruparlos en lexemas y producir como salida una secuencia de tokens.</p>
<ul>
<li>Un <em>token</em> es un par que consiste en un nombre de token y un valor de atributo opcional.</li>
<li>Un <em>lexema</em> es una secuencia de caracteres en el programa fuente, que coinciden con el patrón para un token y que el analizador léxico identifica como una instancia de este token.</li>
<li>Un <em>patrón</em> es una descripción de la forma que pueden tomar los lexemas de un token.</li>
</ul>
<p>El analizador sintáctico obtiene una cadena de tokens del analizador léxico y verifica que dicha cadena pueda generarse con la gramática para el lenguaje fuente. Una gramática proporciona una especificación precisa y fácil de entender de un lenguaje de programación.</p>
<p>En <a target="_blank" rel="noopener" href="https://www.dabeaz.com/ply/">PLY</a> se definen los patrones de los diferentes tokens que se desean reconocer, esto se hace a través de expresiones regulares. Mientras que las producciones y acciones para formar la gramática se definen a través de funciones.</p>
<h3 id="Pre-requisitos"><a href="#Pre-requisitos" class="headerlink" title="Pre-requisitos"></a><strong>Pre-requisitos</strong></h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.python.org/">Python 3</a></li>
<li><a target="_blank" rel="noopener" href="https://www.dabeaz.com/ply/">PLY</a></li>
</ul>
<h3 id="Instalamos-PLY"><a href="#Instalamos-PLY" class="headerlink" title="Instalamos PLY"></a><strong>Instalamos PLY</strong></h3><p>Para hacer uso de PLY en nuestro proyecto no hacemos instalación como tal, lo que necesitamos es descargar el archivo ply-3.11.tar.gz (versión 3.11 al momento de escribir este tutorial) de la página oficial de <a target="_blank" rel="noopener" href="https://www.dabeaz.com/ply/">PLY</a> y lo que hacemos es copiar el fólder “ply” a nuestro proyecto.</p>


<h3 id="Crear-nuestro-proyecto"><a href="#Crear-nuestro-proyecto" class="headerlink" title="Crear nuestro proyecto"></a><strong>Crear nuestro proyecto</strong></h3><p>Primero crearemos un nuevo fólder, en este caso lo llamaremos PROYECTOPLY. Luego lo abrimos en nuestro editor de texto, en este caso usaremos <a target="_blank" rel="noopener" href="https://code.visualstudio.com/">Visual Studio Code</a>. Finalmente procedemos a crear un nuevo archivo llamado <a target="_blank" rel="noopener" href="https://github.com/ericknavarro/ProyectoPly/blob/master/gramatica.py">gramatica.py</a> donde escribiremos nuestro compilador.</p>


<p>Los directorios “<strong>pycache</strong>“, al igual que los archivos “parser.out” y “parsetab.py” son generados por Python los cuales pueden ser excluidos en nuestro controlador de versiones. En este caso, los agregamos a nuestro <a target="_blank" rel="noopener" href="https://github.com/ericknavarro/ProyectoPly/blob/master/.gitignore">.gitignore</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parser.out</span><br><span class="line">parsetab.py</span><br><span class="line">**/__pycache__/**</span><br></pre></td></tr></table></figure>

<p>El directorio “ply” es el que descargamos y utilizaremos para construir nuestro compilador.</p>
<h3 id="Codigo-Fuente-para-el-analizador-lexico-y-sintactico"><a href="#Codigo-Fuente-para-el-analizador-lexico-y-sintactico" class="headerlink" title="Código Fuente para el analizador léxico y sintáctico"></a><strong>Código Fuente para el analizador léxico y sintáctico</strong></h3><p>En el archivo <a target="_blank" rel="noopener" href="https://github.com/ericknavarro/ProyectoPly/blob/master/gramatica.py">gramatica.py</a> tenemos la construcción de nuestro compilador.</p>
<h3 id="Explicacion-del-codigo-fuente-para-el-analizador-lexico"><a href="#Explicacion-del-codigo-fuente-para-el-analizador-lexico" class="headerlink" title="Explicación del código fuente para el analizador léxico"></a><strong>Explicación del código fuente para el analizador léxico</strong></h3><p>Lo primero que debemos hacer es definir el listado de tokens que vamos a reconocer ya asignarlo a la variable tokens</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tokens  = (</span><br><span class="line">    <span class="string">&#x27;REVALUAR&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PARIZQ&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PARDER&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;CORIZQ&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;CORDER&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;MAS&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;MENOS&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;POR&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;DIVIDIDO&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;DECIMAL&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;ENTERO&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PTCOMA&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>Luego escribimos los patrones para los tokens que definimos. Existen dos formas de definir las reglas de nuestros tokens.</p>
<p>La primera, es con expresiones regulares, agregamos el prefijo “t_” al token que queremos definir y luego le especificamos la expresión regular, para esto se hace uso del módulo <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/re.html">re</a> de Python.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Tokens</span></span><br><span class="line">t_REVALUAR  = r<span class="string">&#x27;Evaluar&#x27;</span></span><br><span class="line">t_PARIZQ    = r<span class="string">&#x27;\(&#x27;</span></span><br><span class="line">t_PARDER    = r<span class="string">&#x27;\)&#x27;</span></span><br><span class="line">t_CORIZQ    = r<span class="string">&#x27;\[&#x27;</span></span><br><span class="line">t_CORDER    = r<span class="string">&#x27;\]&#x27;</span></span><br><span class="line">t_MAS       = r<span class="string">&#x27;\+&#x27;</span></span><br><span class="line">t_MENOS     = r<span class="string">&#x27;-&#x27;</span></span><br><span class="line">t_POR       = r<span class="string">&#x27;\*&#x27;</span></span><br><span class="line">t_DIVIDIDO  = r<span class="string">&#x27;/&#x27;</span></span><br><span class="line">t_PTCOMA    = r<span class="string">&#x27;;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>La otra forma es a través de funciones, esto nos sirve para manipular el valor del token que procesamos. Por ejemplo para los valores numéricos los retornamos con el tipo apropiado, hacer validaciones, etc.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def t_DECIMAL(t):</span><br><span class="line">    r<span class="string">&#x27;\d+\.\d+&#x27;</span></span><br><span class="line">    try:</span><br><span class="line">        t.value = <span class="built_in">float</span>(t.value)</span><br><span class="line">    except ValueError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Floaat value too large %d&quot;</span>, t.value)</span><br><span class="line">        t.value = 0</span><br><span class="line">    <span class="built_in">return</span> t</span><br><span class="line"></span><br><span class="line">def t_ENTERO(t):</span><br><span class="line">    r<span class="string">&#x27;\d+&#x27;</span></span><br><span class="line">    try:</span><br><span class="line">        t.value = int(t.value)</span><br><span class="line">    except ValueError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Integer value too large %d&quot;</span>, t.value)</span><br><span class="line">        t.value = 0</span><br><span class="line">    <span class="built_in">return</span> t</span><br></pre></td></tr></table></figure>

<p>Es importante definir también los caracteres que se van a ignorar.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Caracteres ignorados</span></span><br><span class="line">t_ignore = <span class="string">&quot; \t&quot;</span></span><br></pre></td></tr></table></figure>

<p>Las funciones también llevan el prefijo “t_” antes del nombre del token que queremos procesar. La función recibe un parámetro, “t” en nuestro ejemplo, este contiene el valor del token. Retornamos el valor ya procesado que deseamos, o no retornar nada si lo que deseamos es ignorar el token (por ejemplo: comentarios, contadores, etc.).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def t_newline(t):</span><br><span class="line">    r<span class="string">&#x27;\n+&#x27;</span></span><br><span class="line">    t.lexer.lineno += t.value.count(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    </span><br><span class="line">def t_error(t):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Illegal character &#x27;%s&#x27;&quot;</span> % t.value[0])</span><br><span class="line">    t.lexer.skip(1)</span><br></pre></td></tr></table></figure>

<p>Finalmente construimos el analizador léxico haciendo uso de las librerías de PLY</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Construyendo el analizador léxico</span></span><br><span class="line">import ply.lex as lex</span><br><span class="line">lexer = lex.lex()</span><br></pre></td></tr></table></figure>

<h3 id="Explicacion-del-codigo-fuente-para-el-analizador-sintactico"><a href="#Explicacion-del-codigo-fuente-para-el-analizador-sintactico" class="headerlink" title="Explicación del código fuente para el analizador sintáctico"></a><strong>Explicación del código fuente para el analizador sintáctico</strong></h3><p>Otra de las ventajas de Python es que en el mismo archivo podemos definir nuestro análisis sintáctico haciendo uso de los tokens previamente definidos en la sección del analizador léxico.</p>
<p>Primeramente definimos la asociatividad y precedencia de los operadores, ya que la gramática escrita es ambigua, es necesario definir una precedencia para que el analizador no entre en conflicto al analizar, en este caso la precedencia es la misma que la de los operadores aritméticos, la precedencia más baja la tienen la suma y la resta, luego están la multiplicación y la división que tienen una precedencia más alta y por último está el signo menos de las expresiones negativas que tendría la precedencia más alta.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Asociación de operadores y precedencia</span></span><br><span class="line">precedence = (</span><br><span class="line">    (<span class="string">&#x27;left&#x27;</span>,<span class="string">&#x27;MAS&#x27;</span>,<span class="string">&#x27;MENOS&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;left&#x27;</span>,<span class="string">&#x27;POR&#x27;</span>,<span class="string">&#x27;DIVIDIDO&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;right&#x27;</span>,<span class="string">&#x27;UMENOS&#x27;</span>),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>Ahora procedemos a escribir nuestras producciones, aquí vemos otra de las ventajas de Python, las acciones semánticas de nuestras producciones se hacen en forma de funciones. Las características de estas funciones son:</p>
<ul>
<li>El nombre inicia con el prefijo “_p”. El complemento del nombre queda a nuestra discreción</li>
<li>Tiene un único parámetro “t” el cual es una tupla, en cada posición tiene el valor de los terminales y no terminales de la producción.</li>
<li>Haciendo uso del docstring de las funciones de Python especificamos las producciones que serán procesadas por la función.</li>
<li>En el cuerpo de la función definimos la funcionalidad que deseamos</li>
</ul>
<p>Por ejemplo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def p_expresion_evaluar(t):</span><br><span class="line">     <span class="string">&#x27;expresion : expresion MAS expresion&#x27;</span></span><br><span class="line">     <span class="comment">#   ^            ^      ^    ^</span></span><br><span class="line">     <span class="comment">#  t[0]         t[1]   t[2] t[3]</span></span><br><span class="line"> </span><br><span class="line">     t[0] = t[1] + t[3]</span><br></pre></td></tr></table></figure>

<p>Sintetizamos en p[0] (expresion) el valor del resultado de sumar loo valores de p[1] (expresion) y p[3].</p>
<p>A continuación el código completo de nuestras producciones:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definición de la gramática</span></span><br><span class="line">def p_instrucciones_lista(t):</span><br><span class="line">    <span class="string">&#x27;&#x27;</span><span class="string">&#x27;instrucciones    : instruccion instrucciones</span></span><br><span class="line"><span class="string">                        | instruccion &#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">def p_instrucciones_evaluar(t):</span><br><span class="line">    <span class="string">&#x27;instruccion : REVALUAR CORIZQ expresion CORDER PTCOMA&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;El valor de la expresión es: &#x27;</span> + str(t[3]))</span><br><span class="line"></span><br><span class="line">def p_expresion_binaria(t):</span><br><span class="line">    <span class="string">&#x27;&#x27;</span><span class="string">&#x27;expresion : expresion MAS expresion</span></span><br><span class="line"><span class="string">                  | expresion MENOS expresion</span></span><br><span class="line"><span class="string">                  | expresion POR expresion</span></span><br><span class="line"><span class="string">                  | expresion DIVIDIDO expresion&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> t[2] == <span class="string">&#x27;+&#x27;</span>  : t[0] = t[1] + t[3]</span><br><span class="line">    <span class="keyword">elif</span> t[2] == <span class="string">&#x27;-&#x27;</span>: t[0] = t[1] - t[3]</span><br><span class="line">    <span class="keyword">elif</span> t[2] == <span class="string">&#x27;*&#x27;</span>: t[0] = t[1] * t[3]</span><br><span class="line">    <span class="keyword">elif</span> t[2] == <span class="string">&#x27;/&#x27;</span>: t[0] = t[1] / t[3]</span><br><span class="line"></span><br><span class="line">def p_expresion_unaria(t):</span><br><span class="line">    <span class="string">&#x27;expresion : MENOS expresion %prec UMENOS&#x27;</span></span><br><span class="line">    t[0] = -t[2]</span><br><span class="line"></span><br><span class="line">def p_expresion_agrupacion(t):</span><br><span class="line">    <span class="string">&#x27;expresion : PARIZQ expresion PARDER&#x27;</span></span><br><span class="line">    t[0] = t[2]</span><br><span class="line"></span><br><span class="line">def p_expresion_number(t):</span><br><span class="line">    <span class="string">&#x27;&#x27;</span><span class="string">&#x27;expresion    : ENTERO</span></span><br><span class="line"><span class="string">                    | DECIMAL&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">    t[0] = t[1]</span><br><span class="line"></span><br><span class="line">def p_error(t):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error sintáctico en &#x27;%s&#x27;&quot;</span> % t.value)</span><br></pre></td></tr></table></figure>

<p>Por último, podemos manejar también las producciones de error para el manejo de errores sintácticos.</p>
<p>Ahora construimos el analizador sintáctico,la funcionalidad para leer el archivo y enviarle su contenido a nuestro compilador.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import ply.yacc as yacc</span><br><span class="line">parser = yacc.yacc()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">&quot;./entrada.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line">input = f.read()</span><br><span class="line"><span class="built_in">print</span>(input)</span><br><span class="line">parser.parse(input)</span><br></pre></td></tr></table></figure>

<h3 id="Creando-un-archivo-de-entrada-para-nuestro-analizador"><a href="#Creando-un-archivo-de-entrada-para-nuestro-analizador" class="headerlink" title="Creando un archivo de entrada para nuestro analizador"></a><strong>Creando un archivo de entrada para nuestro analizador</strong></h3><p>Creamos un nuevo archivo de texto utilizando nuestro editor llamado <a target="_blank" rel="noopener" href="https://github.com/ericknavarro/ProyectoPly/blob/master/entrada.txt">entrada.txt</a>. El contenido de este archivo es el siguiente:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Evaluar[1+1];</span><br><span class="line">Evaluar[1+1*2];</span><br><span class="line">Evaluar[-(1+1*6/3-5+7)];</span><br><span class="line">Evaluar[-(1+1*6/3-5+1*-2)];</span><br><span class="line">Evaluar[-(1.6+1.45)];</span><br></pre></td></tr></table></figure>

<p>Ejecución</p>
<p>Para ejecutar este script corremos el siguiente comando:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  python3 .\gramatica.py</span><br></pre></td></tr></table></figure>

<p>Como podemos ver, obtenemos la salida esperada.</p>



<h3 id="Acerca-del-autor"><a href="#Acerca-del-autor" class="headerlink" title="Acerca del autor:"></a><strong>Acerca del autor:</strong></h3><p>Este tutorial fue elaborado por el Auxiliar de Cátedra <a target="_blank" rel="noopener" href="https://github.com/rjanixz">Rainman Sián</a>, como contribución al curso de Organización de Lenguajes y Compiladores 2 de la Universidad de San Carlos de Guatemala.</p>
<h3 id="Fuentes-consultadas"><a href="#Fuentes-consultadas" class="headerlink" title="Fuentes consultadas:"></a><strong>Fuentes consultadas:</strong></h3><p>Compiladores, principios, técnicas y herramientas. Aho, Lam, Sethi y Ullman. Segunda Edición.</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Compilers/">Compilers</a><a class="link-muted mr-2" rel="tag" href="/tags/Python/">Python</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=68538d5759b0d100191b08a4&amp;product=sop" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/03/07/25-Interprete-sencillo-utilizando-Javacc/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Intérprete sencillo utilizando JavaCC</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/02/10/23-Mi-primer-proyecto-utilizando-JavaCC/"><span class="level-item">Mi primer proyecto utilizando JavaCC</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Erick Navarro"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Erick Navarro</p><p class="is-size-6 is-block">Data Engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Guatemala</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives/"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories/"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags/"><p class="title">13</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://www.linkedin.com/in/ericknd/" target="_blank" rel="me noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/ericknavarro"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="LinkedIn" href="https://www.linkedin.com/in/ericknd/"><i class="fab fa-linkedin"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AWS/"><span class="level-start"><span class="level-item">AWS</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/AWS/Alexa-Skills/"><span class="level-start"><span class="level-item">Alexa Skills</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS/CloudFront/"><span class="level-start"><span class="level-item">CloudFront</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS/EC2/"><span class="level-start"><span class="level-item">EC2</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS/Lambda/"><span class="level-start"><span class="level-item">Lambda</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS/Route-53/"><span class="level-start"><span class="level-item">Route 53</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS/S3/"><span class="level-start"><span class="level-item">S3</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Computer-Science/"><span class="level-start"><span class="level-item">Computer Science</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul><li><a class="level is-mobile" href="/categories/Computer-Science/Compilers/"><span class="level-start"><span class="level-item">Compilers</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/Computer-Science/Data-Structures/"><span class="level-start"><span class="level-item">Data Structures</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/2020/10/01/27-Mi-primer-proyecto-utilizando-Yacc-y-Lex/"><img src="/gallery/thumbnails/27.png" alt="Mi primer proyecto utilizando Yacc y Lex"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-10-01T21:03:28.000Z">2020-10-01</time></p><p class="title"><a href="/2020/10/01/27-Mi-primer-proyecto-utilizando-Yacc-y-Lex/">Mi primer proyecto utilizando Yacc y Lex</a></p><p class="categories"><a href="/categories/Computer-Science/">Computer Science</a> / <a href="/categories/Computer-Science/Compilers/">Compilers</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/03/15/26-Interprete-sencillo-utilizando-PLY/"><img src="/gallery/thumbnails/26.png" alt="Intérprete sencillo utilizando PLY con Python 3"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-03-16T01:09:28.000Z">2020-03-15</time></p><p class="title"><a href="/2020/03/15/26-Interprete-sencillo-utilizando-PLY/">Intérprete sencillo utilizando PLY con Python 3</a></p><p class="categories"><a href="/categories/Computer-Science/">Computer Science</a> / <a href="/categories/Computer-Science/Compilers/">Compilers</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/03/07/25-Interprete-sencillo-utilizando-Javacc/"><img src="/gallery/thumbnails/25.png" alt="Intérprete sencillo utilizando JavaCC"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-03-07T19:53:33.000Z">2020-03-07</time></p><p class="title"><a href="/2020/03/07/25-Interprete-sencillo-utilizando-Javacc/">Intérprete sencillo utilizando JavaCC</a></p><p class="categories"><a href="/categories/Computer-Science/">Computer Science</a> / <a href="/categories/Computer-Science/Compilers/">Compilers</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/02/10/24-Mi-primer-proyecto-utilizando-PLY/"><img src="/gallery/thumbnails/24.png" alt="Mi primer proyecto utilizando PLY con Python 3"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-02-10T22:17:25.000Z">2020-02-10</time></p><p class="title"><a href="/2020/02/10/24-Mi-primer-proyecto-utilizando-PLY/">Mi primer proyecto utilizando PLY con Python 3</a></p><p class="categories"><a href="/categories/Computer-Science/">Computer Science</a> / <a href="/categories/Computer-Science/Compilers/">Compilers</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/02/10/23-Mi-primer-proyecto-utilizando-JavaCC/"><img src="/gallery/thumbnails/23.png" alt="Mi primer proyecto utilizando JavaCC"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-02-10T22:14:34.000Z">2020-02-10</time></p><p class="title"><a href="/2020/02/10/23-Mi-primer-proyecto-utilizando-JavaCC/">Mi primer proyecto utilizando JavaCC</a></p><p class="categories"><a href="/categories/Computer-Science/">Computer Science</a> / <a href="/categories/Computer-Science/Compilers/">Compilers</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Alexa-Skills/"><span class="tag">Alexa Skills</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C#</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CloudFront/"><span class="tag">CloudFront</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Compilers/"><span class="tag">Compilers</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Data-Structures/"><span class="tag">Data Structures</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/EC2/"><span class="tag">EC2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lambda/"><span class="tag">Lambda</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Route-53/"><span class="tag">Route 53</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/S3/"><span class="tag">S3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Visual-Basic/"><span class="tag">Visual Basic</span><span class="tag">4</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Erick Navarro" height="28"></a><p class="is-size-7"><span>&copy; 2025 Erick Navarro</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>